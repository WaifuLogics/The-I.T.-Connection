function AddFriend(json){let currentUser=json.userSearches,otherUser=json.searchedUser,bodyInfo,headers;fetch("{{ path_for('friend-request') }}",{method:"post",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"type=request&curUser="+currentUser+"&othUser="+otherUser}).then(response=>response.text()).then(data=>{if("success"==data){M.toast({html:"Friend Request Send",displayLength:"1500",inDuration:"600",outDuration:"600"});let friendBtn=document.getElementsByClassName("friend-button");for(let i=0;i<friendBtn.length;i+=1)friendBtn[i].id==otherUser&&(friendBtn[i].style.display="none")}})}function CheckFriendRequests(){let bodyInfo,headers;fetch("{{ path_for('friend-check') }}",{method:"post",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"type=check&userId={{ accountId }}"}).then(response=>response.text()).then(data=>{let cont=document.getElementsByClassName("friend_request-list");for(let i=0;i<cont.length;i+=1)cont[i].innerHTML=data})}function AcceptRequest(array){let requester=array.requester,accepter=array.accepter,bodyInfo,headers;fetch("{{ path_for('friend-accept') }}",{method:"post",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"type=accept&requester="+requester+"&userId="+accepter}).then(response=>response.text()).then(data=>{"success"==data&&(M.toast({html:"Friend Added",displayLength:"1500",inDuration:"600",outDuration:"600"}),CheckFriendRequests(),RetrieveFriends())})}function RetrieveFriends(){let userID="{{ accountId }}",bodyInfo,headers;fetch("{{ path_for('friend-retrieve') }}",{method:"post",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"type=retrieve&userId="+userID}).then(response=>response.json()).then(async json=>{console.log(json);for(let friend of json.friends){let createRoomJson=window.btoa(JSON.stringify({id1:friend.account_id,id2:friend.account_friended}));if(console.log(createRoomJson),friend.account_id==userID)for(let list of document.getElementsByClassName("friend-list"))list.innerHTML+=`\n                         <li class="container-user">\n                            <a href="{{ path_for('chat')}}">\n                                <div class="col s12 wrapper-user">\n                                    <img class="user-img" src="/img/users/test.png" alt="user image"/>\n                                    <p>${await ReturnUserName(friend.account_friended)}</p>\n                                </div>\n                            </a>\n                         </li>\n                     `;else for(let list of document.getElementsByClassName("friend-list"))list.innerHTML+=`\n                         <li class="container-user">\n                            <a href="{{ path_for('chat')}}">\n                                <div class="col s12 wrapper-user">\n                                    <img class="user-img" src="/img/users/test.png" alt="user image"/>\n                                    <p>${await ReturnUserName(friend.account_id)}</p>\n                                </div>\n                            </a>\n                         </li>\n                     `}})}